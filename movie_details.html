<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì˜í™” ìƒì„¸ ì •ë³´</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1 id="movie-title">ì˜í™” ì œëª©</h1>
  </header>

  <section class="movie-details">
    <img src="movie_poster.jpg" alt="Movie Poster">
    <p id="release-year"></p>
    <p id="rating"></p>
    <p>ì¤„ê±°ë¦¬: ì˜í™” ì¤„ê±°ë¦¬ ë‚´ìš©</p>
    <p>ê°ë…: ê°ë… ì´ë¦„</p>
    <p>ë°°ìš°: ë°°ìš° ëª©ë¡</p>
    <p>ì˜í™”ì— ë‚˜ì˜¨ ì¥ì†Œ: ì¥ì†Œ ëª©ë¡</p>
  </section>

  <!-- ë¦¬ë·° ì„¹ì…˜ ì¶”ê°€ -->
  <section class="reviews">
    <h2>ë¦¬ë·° ë‚¨ê¸°ê¸°</h2>

    <!-- ë³„ì  ì„ íƒ -->
    <div class="rating">
      <span>ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</span>
      <div class="stars">
        <span class="star" data-value="1">â˜…</span>
        <span class="star" data-value="2">â˜…</span>
        <span class="star" data-value="3">â˜…</span>
        <span class="star" data-value="4">â˜…</span>
        <span class="star" data-value="5">â˜…</span>
      </div>
    </div>

    <!-- ë¦¬ë·° ì…ë ¥ -->
    <textarea id="review-text" placeholder="ê°ìƒí‰ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
    <button onclick="submitReview()">ë¦¬ë·° ë‚¨ê¸°ê¸°</button>

    <!-- ë¦¬ë·° ëª©ë¡ -->
    <div id="review-list">
      <!-- ì—¬ê¸°ì— ë¦¬ë·°ê°€ ì¶”ê°€ë¨ -->
    </div>
  </section>

  <script>
    // URLì—ì„œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì˜í™” ì œëª© ê°€ì ¸ì˜¤ê¸°
    const urlParams = new URLSearchParams(window.location.search);
    const movieTitle = urlParams.get('title');

    // ì˜í™” ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ì €ì¥
    const movies = [
      { title: "John Wick 4", year: 2024, rating: 8.5 },
      { title: "The Dark Knight", year: 2008, rating: 9.0 },
      { title: "Inception", year: 2010, rating: 8.8 },
      { title: "Interstellar", year: 2014, rating: 8.6 },
      { title: "Matrix", year: 1999, rating: 8.7 },
      { title: "Fast & Furious 7", year: 2015, rating: 7.1 }
    ];

    // ì˜í™” ì œëª©ì— ë§ëŠ” ë°ì´í„° ì°¾ê¸°
    const selectedMovie = movies.find(movie => movie.title === movieTitle);

    // ì˜í™” ì œëª©ê³¼ ì •ë³´ë¥¼ í˜ì´ì§€ì— í‘œì‹œ
    if (selectedMovie) {
      document.getElementById('movie-title').textContent = selectedMovie.title;
      document.getElementById('release-year').textContent = `ë°œë§¤ì¼: ${selectedMovie.year}`;
      document.getElementById('rating').textContent = `í‰ì : ${selectedMovie.rating}`;
    } else {
      document.getElementById('movie-title').textContent = "ì˜í™” ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
    }

    let selectedRating = 0; // ì„ íƒí•œ ë³„ì 

    // ë³„ì  ì„ íƒ ê¸°ëŠ¥
    document.querySelectorAll('.star').forEach(star => {
      star.addEventListener('click', function() {
        selectedRating = this.getAttribute('data-value');
        document.querySelectorAll('.star').forEach(s => s.classList.remove('selected'));
        this.classList.add('selected');
      });
    });

    // ë¦¬ë·° ì œì¶œ ê¸°ëŠ¥
    function submitReview() {
      const reviewText = document.getElementById('review-text').value;
      const reviewList = document.getElementById('review-list');

      if (reviewText && selectedRating) {
        const newReview = document.createElement('div');
        newReview.classList.add('review');
        newReview.innerHTML = `
          <div class="review-text">
            <div class="rating">â˜… ${selectedRating}</div>
            <p>${reviewText}</p>
          </div>
          <div class="buttons">
            <button class="like-button">ğŸ‘</button><span class="likes">0</span>
          </div>
        `;

        reviewList.appendChild(newReview);

        // ì…ë ¥ê°’ ì´ˆê¸°í™”
        document.getElementById('review-text').value = '';
        selectedRating = 0;
        document.querySelectorAll('.star').forEach(s => s.classList.remove('selected'));
      } else {
        alert('ë³„ì ê³¼ ë¦¬ë·°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      }
    }

    // ê³µê° ë²„íŠ¼ ê¸°ëŠ¥
    document.addEventListener('click', function(event) {
      if (event.target.classList.contains('like-button')) {
        const likes = event.target.nextElementSibling;
        likes.innerText = parseInt(likes.innerText) + 1;
      }
    });
  </script>

</body>
</html>
